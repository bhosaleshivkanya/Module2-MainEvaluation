<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Bashboard</title>
    
</head>
<body>
    <h2> Fleet Management -Admin</h2>
    <select id="filterCategory" onchange="applyFilters()">
        <option value="Auto">Auto</option>
        <option value="Car">Car</option>
        <option value="Truck">Truck</option>
        <option value="Bus">Bus</option>
    </select>
    <select id="filterAvailability" onchange="applyFilters()">
        <option value="All"> All Availability</option>
        <option value="Available">Available</option>
         <option value="Unavailable">Unavailable</option>
    </select>
    <button onclick="clearFilters()">clearFilters</button>
    <hr>
    <h3>Add Fleet</h3>
    <input id="regNo" type="text" placeholder="Reg Number"></br>
    <select id="category">
        <option value="">Select Category </option>
        <option value="Auto">Auto</option>
        <option value="Car">Car</option>
        <option value="Truck">Truck</option>
        <option value="Bus">Bus</option>
    </select></body>br>
    <input id="driver" type="text" placeholder="Driver Name"></br>

    <select id="availability" >
        <option value="Available">Available</option>
         <option value="Unavailable">Unavailable</option>
    </select><br>
    <button onclick="addFleet()">Add Fleet</button>

    <h3>Fleet List</h3>
    <div id ="fleetContainer"></div>
    <script>
        let fleets =[];
        const IMG="";
        function addFleet(){
            let regNo= regNoInput().value.trim();
            let cat=categoryInput().value;
            let drv=driverInput().value.trim();
            let avail= availabilityInput().value;
            if(!regNo||!cat||!drv){
                alert("Please fill all fields");
                return;
            }
            fleets.push({regNo,category:cat,driver:drv,availability:avail,imageUrl:Img});
            clearForm();
            renderFleets(fleets);
        }
        function renderFleets(list){
            const box = document.getElementById("fleetContainer");
            box.innerHTML="";
            list.forEach((v, i)=>{
                let card = document.createElement("div");
                card.className="card";
                let img =document.createElement("img");
                img.src=v.imageUrl;
                let r=createP("Reg No:"+v.regNo);
                let c=createP("Category:"+v.category);
                let d=createP("Driver:"+v.driver);
                let a =createP("Availability:"+ v.availability);
                let btn1=createBtn("update Driver",()=>changeAvailability(i));
                let btn2=createBtn("change Availability",()=>changeAvailability(i));
                let btn3=createBtn("Delete",()=>deleteFleet(i));
                card.append(img,r,c,d,a,btn,btn2,btn3);
                box.appendChild(card);
            });
        }
        
    function updateDriver(i) {
        let name = prompt("Enter new driver name");
        if (name === null) return;
        name = name.trim();
        if (!name) {
            alert("Driver name cannot be empty");
            return;
        }
        fleets[i].driver = name;
        renderFleets(applyFiltersReturn());
    }

    
    function changeAvailability(i) {
        fleets[i].availability =
            fleets[i].availability === "Available" ? "Unavailable" : "Available";
        renderFleets(applyFiltersReturn());
    }

   
    function deleteFleet(i) {
        if (confirm("Are you sure?")) {
            fleets.splice(i, 1);
            renderFleets(applyFiltersReturn());
        }
    }

   
    function applyFilters() {
        renderFleets(applyFiltersReturn());
    }

    function applyFiltersReturn() {
        let cat = filterCategory().value;
        let av = filterAvailability().value;

        return fleets.filter(v => {
            let ok = true;
            if (cat !== "All") ok = ok && v.category === cat;
            if (av !== "All") ok = ok && v.availability === av;
            return ok;
        });
    }

    function clearFilters() {
        filterCategory().value = "All";
        filterAvailability().value = "All";
        renderFleets(fleets);
    }

    
    function regNoInput() { return document.getElementById("regNo"); }
    function categoryInput() { return document.getElementById("category"); }
    function driverInput() { return document.getElementById("driver"); }
    function availabilityInput() { return document.getElementById("availability"); }

    function filterCategory() { return document.getElementById("filterCategory"); }
    function filterAvailability() { return document.getElementById("filterAvailability"); }

    

    function createP(text) {
        let p = document.createElement("p");
        p.textContent = text;
        return p;
    }

    function createBtn(text, fn) {
        let b = document.createElement("button");
        b.textContent = text;
        b.onclick = fn;
        return b;
    }
    </script>

</body>
</html>